<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Poesie consigliate | TheItalianPoetry</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Open+Sans:wght@400;600&display=swap"
    rel="stylesheet"
  >

  <!-- Icons -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
  >

  <!-- CSS (stesso stile della Classifica Intelligente) -->
  <link rel="stylesheet" href="css/classifica-intelligente.css">
</head>

<body>

<!-- ================= HEADER ================= -->
<header class="main-header">
  <div class="header-inner">
    <a href="index.html" class="logo" aria-label="Torna alla home">
      <i class="fa-solid fa-feather-pointed"></i>
      <span>TheItalianPoetry</span>
    </a>
  </div>
</header>

<!-- ================= MAIN ================= -->
<main class="page-container" role="main">

  <!-- INTRO -->
  <section class="intro-section" aria-labelledby="discover-title">
    <h1 id="discover-title">Poesie consigliate</h1>
    <p>
      Qui trovi poesie <strong>suggerite in base a ci√≤ che leggi e voti</strong>,
      insieme a qualche scoperta inattesa.
      <br>
      Questa sezione <em>esplora</em>, non classifica.
    </p>
  </section>

  <!-- STATUS -->
  <section
    id="explore-status"
    class="status-section hidden"
    aria-live="polite"
    aria-atomic="true"
  ></section>

  <!-- FEED -->
  <section
    class="ai-feed-section"
    aria-labelledby="discover-feed-title"
  >
    <h2 id="discover-feed-title" class="sr-only">
      Elenco poesie consigliate
    </h2>

    <ul
      id="explore-poems-list"
      class="ai-poems-list"
      aria-label="Poesie consigliate per te"
    ></ul>
  </section>

  <!-- EMPTY STATE -->
  <section
    id="explore-empty"
    class="empty-state hidden"
    aria-live="polite"
  >
    <p>
      Non abbiamo ancora abbastanza segnali per consigliarti poesie.
      <br>
      Continua a leggere, votare e tornare qui ‚ú®
    </p>
  </section>

</main>

<!-- ================= FOOTER ================= -->
<footer class="main-footer" role="contentinfo">
  <p>¬© <span id="year"></span> TheItalianPoetry</p>
</footer>

<!-- ================= CONFIGURAZIONE GLOBALE ================= -->
<script>
  /**
   * üîê Supabase public config
   * (anon key ‚Äì sicura lato client)
   */
  window.SUPABASE_ANON_KEY =
    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRqaWt5cGdtY2h5d3lianhid2FyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyMTMyOTIsImV4cCI6MjA2ODc4OTI5Mn0.dXqWkg47xTg2YtfLhBLrFd5AIB838KdsmR9qsMPkk8Q";

  /**
   * üß† Edge Function (Discover / GPT / Analisi)
   */
  window.EDGE_FUNCTION_URL =
    "https://djikypgmchywybjxbwar.supabase.co/functions/v1/smart-handler";
</script>

<!-- ================= SCRIPT CORE ================= -->

<!-- Supabase init -->
<script type="module" src="js/supabase-init.js"></script>

<!-- Tracciamento interazioni (like, view, click) -->
<script type="module" src="js/ai-interactions-core.js"></script>

<!-- Logica Discover / Poesie consigliate -->
<script type="module" src="js/esplora.js"></script>

<script>
  document.getElementById('year').textContent =
    new Date().getFullYear();
</script>

</body>
</html>
