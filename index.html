<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TheItalianPoetry - La Tua Dashboard Artistica</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&family=Open+Sans:wght@400;600&family=Poppins:wght@600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <!-- Styles -->
  <link rel="stylesheet" href="poetry-widget.css">
  <link rel="stylesheet" href="css/01-base.css">
  <link rel="stylesheet" href="css/02-header-nav.css">
  <link rel="stylesheet" href="css/03-hero.css">
  <link rel="stylesheet" href="css/04-layout-buttons.css">
  <link rel="stylesheet" href="css/05-components.css">
  <link rel="stylesheet" href="css/06-responsive-print.css">


  <!-- SEO base -->
<meta name="description" content="Le voci più amate del mese: scopri, vota e partecipa alla community di poesia.">

<!-- Canonical -->
<link rel="canonical" href="https://theitalianpoetry.it/">

<!-- Open Graph (FB, WhatsApp, Telegram, LinkedIn) -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://theitalianpoetry.it/">
<meta property="og:title" content="TheItalianPoetry — La tua dashboard artistica">
<meta property="og:description" content="Scopri i talenti emergenti, vota e invia la tua poesia.">
<meta property="og:image" content="immagini/Autore.png.png">
<meta property="og:image:alt" content="Copertina TheItalianPoetry con logo e grafiche poetiche">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:site_name" content="TheItalianPoetry">
<meta property="og:locale" content="it_IT">

	
  <!-- Ads -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4946352643458279" crossorigin="anonymous"></script>

  <!-- React (per widget) -->
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
</head>
<body>

  <header class="main-header">
    <!-- Logo centrale -->
    <div class="logo">
      <i class="fa-solid fa-feather-pointed"></i>
      <span>TheItalianPoetry</span>
    </div>

    <!-- Hamburger per mobile -->
    <button class="mobile-nav-toggle" aria-controls="primary-navigation" aria-expanded="false" aria-label="Menu">
      <i class="fas fa-bars" aria-hidden="true"></i>
      <span class="sr-only">Menu</span>
    </button>

    <!-- Navigazione e azioni -->
    <div class="nav-wrapper" id="primary-navigation" data-visible="false">
      <nav class="main-nav">
        <a href="#leaderboard">Classifica</a>
        <a href="#" id="how-to-link">Come Partecipare</a>
	  <a href="#" id="author-link">Il tuo diario</a>
        <a href="#" id="about-us-link">Chi Siamo</a>
        <a href="#" id="author-link">Autore</a>

      </nav>
      <div class="header-actions">
        <div id="auth-buttons">
          <button id="login-google-btn" class="button-social google">
            <i class="fab fa-google"></i> Accedi con Google
          </button>
        </div>
        <div id="user-info" class="hidden">
          <span id="user-email"></span>
          <button id="logout-btn" class="button-secondary">Logout</button>
        </div>
        <button id="open-submission-modal-btn" class="button-primary" disabled>Partecipa</button>
      </div>
    </div>
  </header>

  <main>
    <!-- Hero attaccata all’header -->
    <section class="hero-section">
      <div class="hero-content">
        <h1>Le Voci Più Amate del Mese!</h1>
        <p>Scopri i talenti emergenti della nostra community votati da te e pubblicati su Instagram! Sostieni i tuoi artisti preferiti e lasciati ispirare.</p>
      </div>
    </section>

    <!-- ▼▼▼ COUNTDOWN ▼▼▼ -->
    <section class="countdown-section">
      <div class="countdown-container">
        <h2 class="countdown-title">⏰ Tempo rimanente questo mese</h2>
        <div class="countdown-display">
          <div class="countdown-item">
            <span class="countdown-number" id="countdown-days">00</span>
            <span class="countdown-label">GIORNI</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-number" id="countdown-hours">00</span>
            <span class="countdown-label">ORE</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-number" id="countdown-minutes">00</span>
            <span class="countdown-label">MIN</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-number" id="countdown-seconds">00</span>
            <span class="countdown-label">SEC</span>
          </div>
        </div>
        <p class="countdown-subtitle">Partecipa prima che finisca il mese!</p>
      </div>
    </section>
    <!-- ▲▲▲ COUNTDOWN ▲▲▲ -->

    <div class="container">
      <div class="content-area">
        <section id="mission-principale" class="card-section">
          <div class="card-content">
            <h2>
              <span class="red-text">Scrivi</span>,
              <span class="gold-text">Brilla</span>,
              <span class="green-text">Cresci</span>: La Nostra Community per la Scrittura Creativa
            </h2>
            <p>Benvenuto nella community dove le tue parole prendono vita e la tua creatività viene premiata! Qui crediamo che il vero valore della scrittura risieda nella sua bellezza, originalità e capacità di emozionare.</p>
            <div class="discover-more" id="discover-more-trigger">
              <span>Scopri di più</span>
              <div class="arrow-down"></div>
            </div>
          </div>
        </section>

        <section id="expanded-content" class="card-section hidden-content">
          <div class="card-content" id="card-mission-dettagliata">
            <div class="mission-paragraphs">
              <div class="mission-block">
                <h3 class="red-title">Come Funziona?</h3>
                <p>La giuria popolare sei tu! Condividi poesie, ricevi voti e scala la classifica. I 10 più votati del mese verranno pubblicati su Instagram.</p>
              </div>
              <div class="mission-block">
                <h3 class="yellow-title">Un Ecosistema Sostenibile</h3>
                <p>Manteniamo la piattaforma gratuita grazie ad annunci non invasivi, nel rispetto della tua esperienza e privacy.</p>
              </div>
              <div class="mission-block">
                <h3 class="green-title">Disclaimer</h3>
                <p>Gli annunci supportano i costi senza compromettere la leggibilità: niente pop-up fastidiosi, solo poesia.</p>
              </div>
            </div>
          </div>
        </section>

        <h2 class="section-title" id="leaderboard">Classifica Principale</h2>
        <div class="poems-list"><!-- Popolato dinamicamente --></div>
      </div>

      <aside class="sidebar">
        <div class="sidebar-box">
          <h3>Sponsorizzato da</h3>
          <ins class="adsbygoogle" style="display:block"
               data-ad-client="ca-pub-4946352643458279"
               data-ad-slot="5215106498"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
          <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>

        <div class="sidebar-box">
          <h3>Poesie del Mese</h3>
          <div class="search-box">
            <input type="text" id="search-poems" placeholder="Cerca titolo o autore..." aria-label="Cerca poesie">
            <i class="fas fa-search search-icon"></i>
          </div>
          <div class="filter-options">
            <label for="sort-by">Ordina per:</label>
            <select id="sort-by">
              <option value="recent">Più Recenti</option>
              <option value="popular">Più Votate</option>
              <option value="title-asc">Titolo (A-Z)</option>
              <option value="title-desc">Titolo (Z-A)</option>
            </select>
          </div>
          <div id="monthly-poems-list" class="mini-poems-list"></div>
          <a href="#leaderboard" class="button-secondary full-width-btn">Vedi Classifica Principale</a>
        </div>

        <div class="sidebar-box">
          <h3>Sponsorizzato da</h3>
          <ins class="adsbygoogle" style="display:block"
               data-ad-client="ca-pub-4946352643458279"
               data-ad-slot="5215106498"
               data-ad-format="auto"
               data-full-width-responsive="true"></ins>
          <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
        </div>

        <div class="sidebar-box">
          <h3><i class="fas fa-pen-fancy"></i> Vuoi Partecipare?</h3>
          <p>Condividi la tua arte con la community e fatti votare!</p>
          <div class="participate-buttons">
            <button id="sidebar-participate-btn" class="participation-btn"><i class="fas fa-info-circle"></i> Scopri Come</button>
            <button id="share-cta-btn" class="participation-btn"><i class="fab fa-instagram"></i> Condividi</button>
          </div>
          <div id="share-fallback" class="hidden">
            <div class="share-link-box">
              <input type="text" id="poem-share-link" readonly value="https://theitalianpoetry.it/partecipa">
              <button id="copy-link-btn" class="button-copy"><i class="fas fa-copy"></i> Copia</button>
            </div>
            <p class="share-hint">Condividi questo link sui social!</p>
          </div>
        </div>
      </aside>
    </div>

    <section class="poetry-widget-section">
      <h2 class="widget-title">Analisi IA</h2>
      <div id="poetry-widget-container"></div>
    </section>
  </main>

  <footer class="main-footer">
    <div class="footer-content">
      <p>© 2025 TheItalianPoetry. Tutti i diritti riservati.</p>
      <div class="footer-links">
        <a href="#">Privacy Policy</a>
        <a href="#">Termini di Servizio</a>
        <a href="#">Disclaimer</a>
      </div>
      <div class="footer-social">
        <a href="https://www.instagram.com/theitalianpoetry/" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
      </div>
    </div>
  </footer>

  <!-- ========== MODALE VOTAZIONE A STELLE (coerente con app.js) ========== -->
  <div id="voting-modal" class="modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="vote-modal-title">
    <div class="modal-content">
      <button id="close-voting-modal-btn" class="modal-close-btn" aria-label="Chiudi">&times;</button>

      <h2 id="vote-modal-title" style="margin-bottom:.5rem;">Vota la poesia</h2>
      <p id="vote-poem-title" style="font-weight:700;"></p>
      <p id="vote-poem-author" style="color:#6B7280; margin-bottom:1rem;"></p>
      <!-- AGGIUNTO -->
      <p id="vote-poem-content" style="white-space:pre-line; color:#374151; margin:0 0 1rem;"></p>

      <div class="star-rating" role="radiogroup" aria-label="Valuta con le stelle">
        <input type="radio" id="star1" name="rating" value="1" class="sr-only">
        <label for="star1" class="star" aria-label="1 stella"><i class="fa-regular fa-star"></i></label>

        <input type="radio" id="star2" name="rating" value="2" class="sr-only">
        <label for="star2" class="star" aria-label="2 stelle"><i class="fa-regular fa-star"></i></label>

        <input type="radio" id="star3" name="rating" value="3" class="sr-only">
        <label for="star3" class="star" aria-label="3 stelle"><i class="fa-regular fa-star"></i></label>

        <input type="radio" id="star4" name="rating" value="4" class="sr-only">
        <label for="star4" class="star" aria-label="4 stelle"><i class="fa-regular fa-star"></i></label>

        <input type="radio" id="star5" name="rating" value="5" class="sr-only">
        <label for="star5" class="star" aria-label="5 stelle"><i class="fa-regular fa-star"></i></label>
      </div>

      <input type="hidden" id="vote-poem-id" />
      <button id="submit-vote-btn" class="button-primary" style="margin-top:.5rem;">Invia Voto</button>
      <p id="vote-form-message" role="status" aria-live="polite" style="margin-top:.75rem;"></p>
    </div>
  </div>
  <!-- =============================================================== -->

  <!-- ========== MODALE COME PARTECIPARE ========== -->
  <div id="how-to-modal" class="modal-backdrop hidden" role="dialog" aria-labelledby="how-to-title">
    <div class="modal-content">
      <button id="close-how-to-modal-btn" class="modal-close-btn" aria-label="Chiudi">&times;</button>
      <h2 id="how-to-title">Come partecipare</h2>
      <ol style="margin:1rem 0 1.25rem 1rem;">
        <li>Accedi con Google.</li>
        <li>Apri “Partecipa” e compila titolo + testo (max ~1500 battute).</li>
        <li>Se vuoi, inserisci nome/cognome o pubblica come Anonimo.</li>
        <li>Invia: la poesia appare in lista e può essere votata.</li>
      </ol>
      <button id="how-to-submit-btn" class="button-primary">Vai al modulo di invio</button>
    </div>
  </div>

  <!-- ========== MODALE CHI SIAMO ========== -->
  <div id="about-us-modal" class="modal-backdrop hidden" role="dialog" aria-labelledby="about-us-title">
    <div class="modal-content">
      <button id="close-about-us-modal-btn" class="modal-close-btn" aria-label="Chiudi">&times;</button>
      <h2 id="about-us-title">Chi siamo</h2>
      <p>Una community che promuove la scrittura creativa attraverso una classifica aperta e votazioni pubbliche. Annunci non invasivi ci aiutano a restare gratuiti.</p>
    </div>
  </div>

  <!-- ========== MODALE AUTORE ========== -->
  <div id="author-modal" class="modal-backdrop hidden" role="dialog" aria-labelledby="author-title">
    <div class="modal-content">
      <button id="close-author-modal-btn" class="modal-close-btn" aria-label="Chiudi">&times;</button>
      <h2 id="author-title">Autore</h2>
      <p>Seguici su Instagram per le pubblicazioni mensili.</p>
      <a id="author-external-link" href="author-page.html" target="_blank" class="button-secondary" style="display:inline-block;margin-top:.5rem;">Vai al profilo</a>
    </div>
  </div>

  <!-- ========== MODALE INVIO POESIA ========== -->
  <div id="submission-modal" class="modal-backdrop hidden" role="dialog" aria-labelledby="submission-title">
    <div class="modal-content">
      <button id="close-submission-modal-btn" class="modal-close-btn" aria-label="Chiudi">&times;</button>
      <h2 id="submission-title">Invia la tua poesia</h2>

      <form id="submission-form">
        <div class="form-group">
          <label for="poem-title">Titolo</label>
          <input id="poem-title" type="text" required maxlength="120" />
        </div>
        <div class="form-group">
          <label for="poem-content">Testo</label>
          <textarea id="poem-content" required></textarea>
        </div>

        <div class="form-group-checkbox">
          <input type="checkbox" id="anonymous-checkbox" />
          <label for="anonymous-checkbox">Pubblica come Anonimo</label>
        </div>

        <div class="form-group">
          <label for="author-firstname">Nome</label>
          <input id="author-firstname" type="text" />
        </div>
        <div class="form-group">
          <label for="author-lastname">Cognome</label>
          <input id="author-lastname" type="text" />
        </div>
        <div class="form-group">
          <label for="author-instagram">Instagram (opzionale, senza @)</label>
          <input id="author-instagram" type="text" />
        </div>

        <button type="submit" class="button-primary">Invia</button>
        <p id="form-message" role="status" aria-live="polite"></p>
      </form>
    </div>
  </div>
  <!-- =============================================================== -->

  <!-- Supabase + App -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script type="module" src="app.js"></script>

  <!-- Countdown script minimale (fine mese) -->
  <script>
    (function () {
      const now = new Date();
      const endOfMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1, 0, 0, 0, 0);
      const ids = {
        d: document.getElementById('countdown-days'),
        h: document.getElementById('countdown-hours'),
        m: document.getElementById('countdown-minutes'),
        s: document.getElementById('countdown-seconds'),
      };
      if (!ids.d || !ids.h || !ids.m || !ids.s) return;

      function pad(n){ return n.toString().padStart(2,'0'); }
      function tick(){
        const diff = endOfMonth - new Date();
        if (diff <= 0) {
          ids.d.textContent = ids.h.textContent = ids.m.textContent = ids.s.textContent = '00';
          return;
        }
        const d = Math.floor(diff / (1000*60*60*24));
        const h = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
        const m = Math.floor((diff % (1000*60*60)) / (1000*60));
        const s = Math.floor((diff % (1000*60)) / 1000);

        ['d','h','m','s'].forEach(k => { ids[k].classList.remove('changing'); void ids[k].offsetWidth; ids[k].classList.add('changing'); });

        ids.d.textContent = pad(d);
        ids.h.textContent = pad(h);
        ids.m.textContent = pad(m);
        ids.s.textContent = pad(s);
      }
      tick();
      setInterval(tick, 1000);
    })();
  </script>




  <!-- Fine nuovo modal -->

  <!-- =================== SCRIPTS =================== -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script type="module" src="app.js"></script>

  <!-- Hook leggero per il modal Matchmaking (senza toccare app.js) -->
  <script>
    (function(){
      const btn = document.getElementById('matchmaking-cta-btn');
      const modal = document.getElementById('matchmaking-modal');
      const closeBtn = document.getElementById('close-matchmaking-modal-btn');

      if (btn && modal && closeBtn) {
        btn.addEventListener('click', () => modal.classList.remove('hidden'));
        closeBtn.addEventListener('click', () => modal.classList.add('hidden'));
        modal.addEventListener('click', (e) => {
          if (e.target === modal) modal.classList.add('hidden');
        });
      }
    })();
  </script>

	<script>
document.addEventListener('DOMContentLoaded', function() {
    // Fix per ambienti WordPress e simili dove process non esiste
    if (!window.process) window.process = { env: { NODE_ENV: 'production' } };

    // Caricamento asincrono dello script del widget
    const script = document.createElement('script');
    script.src = 'https://widget.theitalianpoetryproject.com/my-poetry-app.iife.js';
    script.crossOrigin = 'anonymous';

    script.onload = function() {
        if (window.MyPoetryApp?.mount) {
            window.MyPoetryApp.mount(
                document.getElementById('poetry-widget-container'),
                {
                    theme: 'light',
                    onReady: () => console.log('[Widget] Pronto!'),
                    onError: (err) => {
                        console.error('[Widget] Errore:', err);
                        document.getElementById('poetry-widget-container').innerHTML = `
                          <div class="widget-fallback">
                            <p>Errore nel caricamento delle poesie. <a href="/archivio">Archivio</a></p>
                          </div>
                        `;
                    }
                }
            );
        } else {
            document.getElementById('poetry-widget-container').innerHTML = `
                <div class="widget-fallback">
                    <p>Impossibile inizializzare il widget. <a href="/archivio">Archivio</a></p>
                </div>
            `;
        }
    };

    script.onerror = () => {
        document.getElementById('poetry-widget-container').innerHTML = `
            <div class="widget-fallback">
                <p>Non riesco a caricare le poesie. <a href="/archivio">Archivio</a></p>
            </div>
        `;
    };

    document.body.appendChild(script);
});
</script>


</body>
</html>
